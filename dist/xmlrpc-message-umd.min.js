/** xmlrpc-message-umd 0.3.0 
 * 2014-04-23
 */

"use strict";!function(root,factory){"function"==typeof define&&define.amd?define(["btoa"],factory):"object"==typeof exports?module.exports=factory(require("btoa-umd")):root.XMLRPCMessage=factory(root.Btoa)}(this,function(Btoa){var XMLRPCMessage=function(method){return method&&this.setMethod(method),this.params=[],this};return XMLRPCMessage.prototype.setMethod=function(methodName){return methodName?(this.method=methodName,this):this},XMLRPCMessage.prototype.addParameter=function(data){return 0===arguments.length?this:(this.params[this.params.length]=data,this)},XMLRPCMessage.prototype.xml=function(){var xml="";xml+="<?xml version='1.0'?>\n",xml+="<methodCall>\n",xml+="<methodName>"+this.method+"</methodName>\n",xml+="<params>\n";for(var i=0;i<this.params.length;i++){var data=this.params[i];xml+="<param>\n",xml+="<value>"+XMLRPCMessage.getParamXML(data,XMLRPCMessage.dataTypeOf(data))+"</value>\n",xml+="</param>\n"}return xml+="</params>\n",xml+="</methodCall>"},XMLRPCMessage.dataTypeOf=function(o,forceType){if(forceType)return forceType;if(!o&&o!==!1)return!1;var type=typeof o;switch(type=type.toLowerCase()){case"number":type=Math.round(o)===o?"int":"double";break;case"object":var con=o.constructor;type=con===Btoa?"base64":con===Date?"date":con===Array?"array":"struct"}return type},XMLRPCMessage.doValueXML=function(data,type){if(!data)return"";var xml="<"+type+">"+data+"</"+type+">";return xml},XMLRPCMessage.doBooleanXML=function(data){if(!data&&data!==!1)return"";var value=data===!0?1:0,xml="<boolean>"+value+"</boolean>";return xml},XMLRPCMessage.doDateXML=function(data){if(!data)return"";var xml="<dateTime.iso8601>";return xml+=XMLRPCMessage.dateToISO8601(data),xml+="</dateTime.iso8601>"},XMLRPCMessage.doBase64XML=function(data){if(!data)return"";var xml="<base64>";return xml+=data.a,xml+="</base64>"},XMLRPCMessage.doArrayXML=function(data){if(!data)return"";for(var xml="<array><data>\n",i=0;i<data.length;i++)xml+="<value>"+XMLRPCMessage.getParamXML(data[i],XMLRPCMessage.dataTypeOf(data[i]))+"</value>\n";return xml+="</data></array>\n"},XMLRPCMessage.doStructXML=function(data){if(!data)return"";var xml="<struct>\n";for(var i in data)xml+="<member>\n",xml+="<name>"+i+"</name>\n",xml+="<value>"+XMLRPCMessage.getParamXML(data[i],XMLRPCMessage.dataTypeOf(data[i]))+"</value>\n",xml+="</member>\n";return xml+="</struct>\n"},XMLRPCMessage.getParamXML=function(data,type){if(!data&&data!==!1)return!1;type||(type="string");var xml;switch(type){case"base64":xml=XMLRPCMessage.doBase64XML(data);break;case"date":xml=XMLRPCMessage.doDateXML(data);break;case"array":xml=XMLRPCMessage.doArrayXML(data);break;case"struct":xml=XMLRPCMessage.doStructXML(data);break;case"boolean":xml=XMLRPCMessage.doBooleanXML(data);break;default:xml=XMLRPCMessage.doValueXML(data,type)}return xml},XMLRPCMessage.dateToISO8601=function(date){if(!date)return!1;if("object"!=typeof date||!(date instanceof Date))return!1;var year=date.getYear().toString(),month=XMLRPCMessage.leadingZero(date.getMonth().toString()),day=XMLRPCMessage.leadingZero(date.getDate().toString()),time=XMLRPCMessage.leadingZero(date.getHours().toString())+":"+XMLRPCMessage.leadingZero(date.getMinutes().toString())+":"+XMLRPCMessage.leadingZero(date.getSeconds().toString()),converted=year+month+day+"T"+time;return converted},XMLRPCMessage.leadingZero=function(n){return n?"number"!=typeof n&&"string"!=typeof n?!1:(1===n.length&&(n="0"+n),n):!1},XMLRPCMessage.btoa=function(data){if(!data)return!1;var ba=new Btoa;return ba.handle(data)},XMLRPCMessage});
//# sourceMappingURL=xmlrpc-message-umd.min.map